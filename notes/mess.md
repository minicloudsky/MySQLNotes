## MySQL 性能优化杂谈

#### in (1,2,3) 和 between 1 and 3 区别

in 需要查询 3次，between and 查询一次

##### 如何 让 mysql 的 myisam 引擎支持事务

用 lock table 实现，只能实现串行化隔离级别。

MyISAM 不支持崩溃恢复，即使用 lock table 实现，问题很多

ACID 里面，原子性和持久性做不到

隔离性只能实现基本上用不到的串行化

一致性在正常运行的时候依赖于串行化，在异常崩溃时候不能保证

#### 联合索引的技巧

总结：
1、覆盖索引：如果查询条件使用的是普通索引（或是联合索引的最左原则字段），查询结果是联合索引的字段或是主键，不用回表操作，直接返回结果，减少IO磁盘读写读取正行数据
2、最左前缀：联合索引的最左 N 个字段，也可以是字符串索引的最左 M 个字符
3、联合索引：根据创建联合索引的顺序，以最左原则进行where检索，比如（age，name）以age=1 或 age= 1 and name=‘张三’可以使用索引，单以name=‘张三’ 不会使用索引，考虑到存储空间的问题，还请根据业务需求，将查找频繁的数据进行靠左创建索引。
4、索引下推：like 'hello%’and age >10 检索，MySQL5.6版本之前，会对匹配的数据进行回表查询。5.6版本后，会先过滤掉age<10的数据，再进行回表查询，减少回表率，提升检索速度

